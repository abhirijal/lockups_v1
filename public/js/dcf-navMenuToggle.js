define(["exports","./dcf-utility"],function(e,a){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.DCFNavMenuToggle=void 0;var t=function(){function o(t,e){var i=this;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.disableBodyScroll=e.disableBodyScroll,this.enableBodyScroll=e.enableBodyScroll,this.skipNav=document.getElementById("dcf-skip-nav"),this.institutionTitle=document.getElementById("dcf-institution-title"),this.logo=document.getElementById("dcf-logo-lockup"),this.nav=document.getElementById("dcf-navigation"),this.main=document.querySelector("main"),this.footer=document.getElementById("dcf-footer");var e=document.querySelectorAll(".hrjs"),e=(Array.prototype.forEach.call(e,function(e){try{new t(e,{tolerance:{up:5,down:5}}).init()}catch(e){}}),this.toggleButtons=document.querySelectorAll(".dcf-nav-toggle-btn-menu"),this.toggleIconOpen=document.getElementById("dcf-nav-toggle-icon-open-menu"),this.toggleIconClose=document.getElementById("dcf-nav-toggle-icon-close-menu"),this.toggleLabel=document.querySelector(".dcf-nav-toggle-label-menu"),this.mobileNav=document.getElementById("dcf-navigation"),this.modalParent=document.querySelector(".dcf-nav-menu"),this.mobileNavMenu=document.getElementById("dcf-nav-menu-child"),this.mobileNavMenu||(this.mobileNavMenu=document.createElement("nav"),this.mobileNavMenu.setAttribute("id","dcf-nav-menu-child")),this.tabFocusEls=this.mobileNavMenu.querySelectorAll("[href]"),this.firstTabFocusEl=this.tabFocusEls[a.DCFUtility.magicNumbers("int0")],this.lastTabFocusEl=this.tabFocusEls[this.tabFocusEls.length-a.DCFUtility.magicNumbers("int1")],this.closeSearchEvent=new CustomEvent("closeSearch"),this.closeIDMOptionsEvent=new CustomEvent("closeDropDownWidget",{detail:{type:"idm-logged-in"}}),this.activeToggleButton=null,this.isNavigationOpen=function(){return i.modalParent.classList.contains("dcf-modal-open")},this.closeOpenNavigation=function(){!0===i.isNavigationOpen()&&i.closeNavModal()},this.onKeyDown=function(e){e.keyCode===a.DCFUtility.magicNumbers("escCode")&&i.closeNavModal();"Tab"!==e.key&&9!==e.keyCode||("Tab"!==e.key&&9!==e.keyCode||(e.shiftKey?document.activeElement===i.firstTabFocusEl&&(e.preventDefault(),i.lastTabFocusEl.focus()):document.activeElement===i.lastTabFocusEl&&(e.preventDefault(),i.firstTabFocusEl.focus())))},document.addEventListener("closeNavigation",this.closeOpenNavigation,!1),window.addEventListener("resize",this.closeOpenNavigation,!1),Array.prototype.forEach.call(this.toggleButtons,function(e){e.addEventListener("click",function(e){return i.activeToggleButton=e.currentTarget,!0===i.isNavigationOpen()?i.closeNavModal():i.openNavModal(),!1},!1)}),document.querySelectorAll(".dcf-nav-menu-child>ul>li")),e=Array.from(e).find(function(e){return e.querySelector("ul")}),n=document.getElementById("dcf-menu-toggle");e&&n&&(n.removeAttribute("hidden"),n.setAttribute("aria-expanded","false"),n.setAttribute("aria-label","open menu"))}var e,t,i;return e=o,(t=[{key:"openNavModal",value:function(){document.dispatchEvent(this.closeSearchEvent),document.dispatchEvent(this.closeIDMOptionsEvent),window.matchMedia("(max-width: 56.12em)").matches&&(this.skipNav.setAttribute("aria-hidden","true"),this.institutionTitle.setAttribute("aria-hidden","true"),this.logo.setAttribute("aria-hidden","true"),this.nav.setAttribute("aria-hidden","false"),this.main.setAttribute("aria-hidden","true"),this.footer.setAttribute("aria-hidden","true"),this.disableBodyScroll(this.mobileNavMenu)),Array.prototype.forEach.call(this.toggleButtons,function(e){e.setAttribute("aria-expanded","true"),e.setAttribute("aria-label","close menu")}),this.modalParent.classList.add("dcf-modal-open"),this.toggleIconOpen.classList.add("dcf-d-none"),this.toggleIconClose.classList.remove("dcf-d-none"),this.toggleLabel.textContent="Close",this.firstTabFocusEl.focus(),document.addEventListener("keydown",this.onKeyDown)}},{key:"closeNavModal",value:function(){window.matchMedia("(max-width: 56.12em)").matches&&(this.skipNav.setAttribute("aria-hidden","false"),this.institutionTitle.setAttribute("aria-hidden","false"),this.logo.setAttribute("aria-hidden","false"),this.nav.setAttribute("aria-hidden","true"),this.main.setAttribute("aria-hidden","false"),this.footer.setAttribute("aria-hidden","false"),this.enableBodyScroll(this.mobileNavMenu)),Array.prototype.forEach.call(this.toggleButtons,function(e){e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","open menu")}),this.modalParent.classList.remove("dcf-modal-open"),this.toggleIconOpen.classList.remove("dcf-d-none"),this.toggleIconClose.classList.add("dcf-d-none"),this.toggleLabel.textContent="Menu",this.activeToggleButton.focus(),document.removeEventListener("keydown",this.onKeyDown)}}])&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}();e.DCFNavMenuToggle=t});